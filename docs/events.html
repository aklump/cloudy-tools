<!DOCTYPE html>

<html>
<head>
  <title>Events (Hooks)</title>
  <link href="search/tipuesearch.css" rel="stylesheet">
  <link href="style.css" rel="stylesheet">
</head>

<body class="page--events">
<header>
  <div class="pager"><a href="documenting.html" class="prev documenting">&laquo;Documenting Code</a><a href="index.html" class="index pager__book-title">Cloudy</a><a href="error-handling.html" class="next error-handling">Exit Status&raquo;</a></div></header>

  <div class="search__wrapper">
  <form action="search--results.html">
    <input type="text" class="search-input" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

  <h1>Events (Hooks)</h1>
  <div class="breadcrumb"><a href="index.html">Index</a></div>

<section><section>

<ul>
<li><p>Event handlers are functions that must be defined before the Cloudy bootstrap.</p>

<pre><code>#!/usr/bin/env bash

...

#
# Define all event handlers here.
#

# Begin Cloudy Bootstrap
s="${BASH_SOURCE[0]}";while ...
</code></pre></li>
<li><p>To see the available events recursively search codebase for <code>event_dispatch "</code>.</p></li>
</ul>

<h2>Cloudy Core Events</h2>

<ul>
<li>pre_config</li>
<li>compile_config</li>
<li>boot</li>
<li>clear_cache</li>
</ul>

<h2>on_boot</h2>

<p>If you define this function before the bootstrap it will be called once the minimum bootstrap has been called.  To see an example of this you can look to the <code>tests</code> path in <em>cloudy_installer.sh</em>.</p>

<h2>Example of a Custom Event</h2>

<p>Imagine a custom event like showing info.  Let's call the event <code>show_info</code>.  You Cloudy script will fire or trigger the event with a line like this:</p>

<pre><code>event_dispatch "show_info" "do" "re" "mi"
local trigger_result=$?
</code></pre>

<p>How might another script respond to this event?</p>

<pre><code>function on_show_info() {
    local do=$1
    local re=$2
    local mi=$3

    ...
}
</code></pre>

<h3>Listening for events</h3>

<p>You can register custom callbacks using <code>event_listen</code>.  See below...</p>

<h3>Using <code>additional_bootstrap</code> files</h3>

<p>In some cases you will need to add your listeners in a custom bootstrap file which is registered in your configuration as <code>additional_bootstrap</code>.  They are sourced after all configuration has been loaded.  The contents of such file could look like this:</p>

<pre><code>#!/usr/bin/env bash

function here_we_go() {
    debug "$FUNCNAME;\$FUNCNAME"
}

event_listen "boot" "here_we_go"
</code></pre>
</section></section>

<div class="search__results">
  <div id="tipue_search_content"></div>
</div>

<footer>
  <div class="pager"><a href="documenting.html" class="prev documenting">&laquo;Documenting Code</a><a href="index.html" class="index pager__book-title">Cloudy</a><a href="error-handling.html" class="next error-handling">Exit Status&raquo;</a></div>  
  <div id="footer-legaleeze">
    <p class="legaleeze center">Version: 1.3.7 &bull; Last Updated: Thu, 17 Mar 2022 12:50:46 -0700</p>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="search/tipuesearch_content.js"></script>
  <script src="search/tipuesearch_set.js"></script>
  <script src="search/tipuesearch.min.js"></script>
  <script>
    $(document).ready(function () {
      $('#tipue_search_input').tipuesearch();
    });
  </script>
<script src="js/core.js"></script>
</body>
</html>

